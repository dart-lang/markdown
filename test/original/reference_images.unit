>>> image
![][foo]
[foo]: http://foo.com/foo.png

<<<
<p><a href="http://foo.com/foo.png"><img src="http://foo.com/foo.png"></img></a></p>
>>> alternate text
![alternate text][foo]
[foo]: http://foo.com/foo.png

<<<
<p><a href="http://foo.com/foo.png"><img alt="alternate text" src="http://foo.com/foo.png"></img></a></p>
>>> title
![][foo]
[foo]: http://foo.com/foo.png "optional title"

<<<
<p><a href="http://foo.com/foo.png" title="optional title"><img src="http://foo.com/foo.png" title="optional title"></img></a></p>
>>> invalid alt text
![`alt`][foo]
[foo]: http://foo.com/foo.png "optional title"

<<<
<p><a href="http://foo.com/foo.png" title="optional title"><img src="http://foo.com/foo.png" title="optional title"></img></a></p>
